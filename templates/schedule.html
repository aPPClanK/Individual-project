<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Расписание</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='schedule.css') }}">
</head>
<body>
    <a href="/">home</a>
    <div class="box">
        <h1 style="text-align:center">Расписание</h1>
        <form method="GET" action="/schedule">
            <label style="padding:10px; font-size:large; padding-top: 100px;" for="group">Выберите группу:</label>
            <select name="group" id="group" onchange="this.form.submit()">
                <option value="" {% if not selected_group %}selected{% endif %}>Все группы</option>
                {% for group in groups %}
                    <option value="{{ group[0] }}" {% if group[0] == selected_group|int %}selected{% endif %}>{{ group[1] }}</option>
                {% endfor %}
            </select>
        </form>
        <hr>
        <table>
            <tr>
                <th class="time">Время</th>
                <th class="day">Понедельник</th>
                <th class="day">Вторник</th>
                <th class="day">Среда</th>
                <th class="day">Четверг</th>
                <th class="day">Пятница</th>
                <th class="day">Суббота</th>
            </tr>
            {% set times = [
                ('08:30', '09:50'),
                ('10:00', '11:20'),
                ('11:30', '12:50'),
                ('13:30', '14:50'),
                ('15:00', '16:20'),
                ('16:30', '17:50')
            ] %}
            {% for start_time, end_time in times %}
            <tr>
                <td class="time">{{ start_time }} - {{ end_time }}</td>
                {% for day in ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'] %}
                    <td>
                        {% for item in schedule %}
                            {% if item[4] == day and item[5].strftime('%H:%M') == start_time %}
                                <div class="schedule-item" style="background-color: {{ 'lightblue' if item[0] == 1 else 'lightgreen' }};">
                                    {{ item[1] }}<br>
                                    {{ item[3] }}
                                </div>
                            {% endif %}
                        {% endfor %}
                    </td>
                {% endfor %}
            </tr>
            {% endfor %}
        </table>
    </div>
</body>
</html>
